---
layout: post
title:  "开发经验漫谈 -- 代码规范"
---

这几期想和大家分享下我自己在开发时的一些经验，这次来说说关于代码规范。

## 什么是代码规范

我理解的代码规范，是一个标准，让写代码的人按照这个标准来开发。

例如php的psr1（https://www.php-fig.org/psr/psr-1/）和psr2（https://www.php-fig.org/psr/psr-2/）

## 为什么需要代码规范

万事万物必然有其存在的意义，这里说下我的理解：

1. 这里先说明很重要的一点，那就是代码是写给人看的，并不是机器，所以说代码要让别人好理解。
1. 我们多数情况下都是团队开发，所以大家都约定好一个标准，更加有利于团队代码的可维护性。
1. 团队中有老人离职、有新人加入，从代码规范中是可以看到这个团队的文化的传承的。
1. 对自己也是个约束，不要太随意了。

## 如何制定规范

制定步骤：

1. 首先看是否有官方规范。一些较新的编程语言通常会有自己的一些规范，例如Golang，大家可以参考官方的Effective Go（https://golang.org/doc/effective_go.html），建议遵守。
1. 其次看是否有权威的、认同度高的规范。通常使用较广泛的语言会这样做，如php的psr1、2，建议遵守。
1. 之后，才是我们团队来制定自己的规范。

团队规范注意：

1. 尽量避免一言堂。因为是团队规范，所以是需要得到大家的认同的。
1. 要经常反思，不好的地方和团队成员讨论不断调整。其实这也是要求团队成员开发时不断反思的一个过程。

## 参与过的规范实例

这里举两个自己参与过的实例：

#### Golang项目

我们团队第一次使用Golang开发项目时，当时制定了这样的一套规范：

- 变量

1. 多个词之间用"_"（下划线）连接，如：prj_home
1. 可导出全局变量每个词的首字母均大写，如：Prj_Home
1. 包内部全局变量用“_”（下划线）开头，单词小写，如：_prj_home

- 函数

1. 函数名称驼峰式，如：listPrj

- 类型

1. 类型名用“t”开头，如：t_prj_item
1. 可导出名称用“T”，如：T_Prj_Item
1. 接口类型用“i”开头，如：i_logger
1. 可导出接口类型用“I”，如：I_Logger
1. 多名词规则同“变量命名规则”

这套规范现在看来，很多地方都不合适，但
